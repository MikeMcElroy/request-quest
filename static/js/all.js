var hljs=new function(){function l(o){return o.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;")}function b(p){for(var o=p.firstChild;o;o=o.nextSibling){if("CODE"==o.nodeName)return o;if(3!=o.nodeType||!o.nodeValue.match(/\s+/))break}}function h(p,o){return Array.prototype.map.call(p.childNodes,function(q){return 3==q.nodeType?o?q.nodeValue.replace(/\n/g,""):q.nodeValue:"BR"==q.nodeName?"\n":h(q,o)}).join("")}function a(q){var p=(q.className+" "+q.parentNode.className).split(/\s+/);p=p.map(function(r){return r.replace(/^language-/,"")});for(var o=0;p.length>o;o++)if(e[p[o]]||"no-highlight"==p[o])return p[o]}function c(q){var o=[];return function p(r,s){for(var t=r.firstChild;t;t=t.nextSibling)3==t.nodeType?s+=t.nodeValue.length:"BR"==t.nodeName?s+=1:1==t.nodeType&&(o.push({event:"start",offset:s,node:t}),s=p(t,s),o.push({event:"stop",offset:s,node:t}));return s}(q,0),o}function j(x,v,w){function t(){return x.length&&v.length?x[0].offset!=v[0].offset?x[0].offset<v[0].offset?x:v:"start"==v[0].event?x:v:x.length?x:v}function s(A){function z(B){return" "+B.nodeName+'="'+l(B.value)+'"'}return"<"+A.nodeName+Array.prototype.map.call(A.attributes,z).join("")+">"}for(var p=0,y="",r=[];x.length||v.length;){var u=t().splice(0,1)[0];if(y+=l(w.substr(p,u.offset-p)),p=u.offset,"start"==u.event)y+=s(u.node),r.push(u.node);else if("stop"==u.event){var o,q=r.length;do q--,o=r[q],y+="</"+o.nodeName.toLowerCase()+">";while(o!=u.node);for(r.splice(q,1);r.length>q;)y+=s(r[q]),q++}}return y+l(w.substr(p))}function f(q){function o(s,r){return RegExp(s,"m"+(q.cI?"i":"")+(r?"g":""))}function p(y,w){function z(A,t){t.split(" ").forEach(function(B){var C=B.split("|");r[C[0]]=[A,C[1]?Number(C[1]):1],s.push(C[0])})}if(!y.compiled){y.compiled=!0;var s=[];if(y.k){var r={};if(y.lR=o(y.l||hljs.IR,!0),"string"==typeof y.k)z("keyword",y.k);else for(var x in y.k)y.k.hasOwnProperty(x)&&z(x,y.k[x]);y.k=r}w&&(y.bWK&&(y.b="\\b("+s.join("|")+")\\s"),y.bR=o(y.b?y.b:"\\B|\\b"),y.e||y.eW||(y.e="\\B|\\b"),y.e&&(y.eR=o(y.e)),y.tE=y.e||"",y.eW&&w.tE&&(y.tE+=(y.e?"|":"")+w.tE)),y.i&&(y.iR=o(y.i)),void 0===y.r&&(y.r=1),y.c||(y.c=[]);for(var v=0;y.c.length>v;v++)"self"==y.c[v]&&(y.c[v]=y),p(y.c[v],y);y.starts&&p(y.starts,w);for(var u=[],v=0;y.c.length>v;v++)u.push(y.c[v].b);y.tE&&u.push(y.tE),y.i&&u.push(y.i),y.t=u.length?o(u.join("|"),!0):{exec:function(){return null}}}}p(q)}function d(D,E){function o(r,M){for(var L=0;M.c.length>L;L++){var K=M.c[L].bR.exec(r);if(K&&0==K.index)return M.c[L]}}function s(K,r){return K.e&&K.eR.test(r)?K:K.eW?s(K.parent,r):void 0}function t(r,K){return K.i&&K.iR.test(r)}function y(L,r){var K=F.cI?r[0].toLowerCase():r[0];return L.k.hasOwnProperty(K)&&L.k[K]}function G(){var K=l(w);if(!A.k)return K;var r="",N=0;A.lR.lastIndex=0;for(var L=A.lR.exec(K);L;){r+=K.substr(N,L.index-N);var M=y(A,L);M?(v+=M[1],r+='<span class="'+M[0]+'">'+L[0]+"</span>"):r+=L[0],N=A.lR.lastIndex,L=A.lR.exec(K)}return r+K.substr(N)}function z(){if(A.sL&&!e[A.sL])return l(w);var r=A.sL?d(A.sL,w):g(w);return A.r>0&&(v+=r.keyword_count,B+=r.r),'<span class="'+r.language+'">'+r.value+"</span>"}function J(){return void 0!==A.sL?z():G()}function I(L,r){var K=L.cN?'<span class="'+L.cN+'">':"";L.rB?(x+=K,w=""):L.eB?(x+=l(r)+K,w=""):(x+=K,w=r),A=Object.create(L,{parent:{value:A}}),B+=L.r}function C(K,r){if(w+=K,void 0===r)return x+=J(),0;var L=o(r,A);if(L)return x+=J(),I(L,r),L.rB?0:r.length;var M=s(A,r);if(M){M.rE||M.eE||(w+=r),x+=J();do A.cN&&(x+="</span>"),A=A.parent;while(A!=M.parent);return M.eE&&(x+=l(r)),w="",M.starts&&I(M.starts,""),M.rE?0:r.length}if(t(r,A))throw"Illegal";return w+=r,r.length||1}var F=e[D];f(F);var A=F,w="",B=0,v=0,x="";try{for(var u,q,p=0;;){if(A.t.lastIndex=p,u=A.t.exec(E),!u)break;q=C(E.substr(p,u.index-p),u[0]),p=u.index+q}return C(E.substr(p)),{r:B,keyword_count:v,value:x,language:D}}catch(H){if("Illegal"==H)return{r:0,keyword_count:0,value:l(E)};throw H}}function g(s){var o={keyword_count:0,r:0,value:l(s)},q=o;for(var p in e)if(e.hasOwnProperty(p)){var r=d(p,s);r.language=p,r.keyword_count+r.r>q.keyword_count+q.r&&(q=r),r.keyword_count+r.r>o.keyword_count+o.r&&(q=o,o=r)}return q.language&&(o.second_best=q),o}function i(q,p,o){return p&&(q=q.replace(/^((<[^>]+>|\t)+)/gm,function(r,v){return v.replace(/\t/g,p)})),o&&(q=q.replace(/\n/g,"<br>")),q}function m(r,u,p){var v=h(r,p),t=a(r);if("no-highlight"!=t){var w=t?d(t,v):g(v);t=w.language;var o=c(r);if(o.length){var q=document.createElement("pre");q.innerHTML=w.value,w.value=j(o,c(q),v)}w.value=i(w.value,u,p);var s=r.className;s.match("(\\s|^)(language-)?"+t+"(\\s|$)")||(s=s?s+" "+t:t),r.innerHTML=w.value,r.className=s,r.result={language:t,kw:w.keyword_count,re:w.r},w.second_best&&(r.second_best={language:w.second_best.language,kw:w.second_best.keyword_count,re:w.second_best.r})}}function n(){n.called||(n.called=!0,Array.prototype.map.call(document.getElementsByTagName("pre"),b).filter(Boolean).forEach(function(o){m(o,hljs.tabReplace)}))}function k(){window.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)}var e={};this.LANGUAGES=e,this.highlight=d,this.highlightAuto=g,this.fixMarkup=i,this.highlightBlock=m,this.initHighlighting=n,this.initHighlightingOnLoad=k,this.IR="[a-zA-Z][a-zA-Z0-9_]*",this.UIR="[a-zA-Z_][a-zA-Z0-9_]*",this.NR="\\b\\d+(\\.\\d+)?",this.CNR="(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",this.BNR="\\b(0b[01]+)",this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",this.BE={b:"\\\\[\\s\\S]",r:0},this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0},this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0},this.CLCM={cN:"comment",b:"//",e:"$"},this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"},this.HCM={cN:"comment",b:"#",e:"$"},this.NM={cN:"number",b:this.NR,r:0},this.CNM={cN:"number",b:this.CNR,r:0},this.BNM={cN:"number",b:this.BNR,r:0},this.inherit=function(q,r){var o={};for(var p in q)o[p]=q[p];if(r)for(var p in r)o[p]=r[p];return o}};hljs.LANGUAGES.javascript=function(a){return{k:{keyword:"in if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const",literal:"true false null undefined NaN Infinity"},c:[a.ASM,a.QSM,a.CLCM,a.CBLCLM,a.CNM,{b:"("+a.RSR+"|\\b(case|return|throw)\\b)\\s*",k:"return throw case",c:[a.CLCM,a.CBLCLM,{cN:"regexp",b:"/",e:"/[gim]*",i:"\\n",c:[{b:"\\\\/"}]},{b:"<",e:">;",sL:"xml"}],r:0},{cN:"function",bWK:!0,e:"{",k:"function",c:[{cN:"title",b:"[A-Za-z$_][0-9A-Za-z$_]*"},{cN:"params",b:"\\(",e:"\\)",c:[a.CLCM,a.CBLCLM],i:"[\"'\\(]"}],i:"\\[|%"}]}}(hljs),hljs.LANGUAGES.css=function(a){var b={cN:"function",b:a.IR+"\\(",e:"\\)",c:[a.NM,a.ASM,a.QSM]};return{cI:!0,i:"[=/|']",c:[a.CBLCLM,{cN:"id",b:"\\#[A-Za-z0-9_-]+"},{cN:"class",b:"\\.[A-Za-z0-9_-]+",r:0},{cN:"attr_selector",b:"\\[",e:"\\]",i:"$"},{cN:"pseudo",b:":(:)?[a-zA-Z0-9\\_\\-\\+\\(\\)\\\"\\']+"},{cN:"at_rule",b:"@(font-face|page)",l:"[a-z-]+",k:"font-face page"},{cN:"at_rule",b:"@",e:"[{;]",eE:!0,k:"import page media charset",c:[b,a.ASM,a.QSM,a.NM]},{cN:"tag",b:a.IR,r:0},{cN:"rules",b:"{",e:"}",i:"[^\\s]",r:0,c:[a.CBLCLM,{cN:"rule",b:"[^\\s]",rB:!0,e:";",eW:!0,c:[{cN:"attribute",b:"[A-Z\\_\\.\\-]+",e:":",eE:!0,i:"[^\\s]",starts:{cN:"value",eW:!0,eE:!0,c:[b,a.NM,a.QSM,a.ASM,a.CBLCLM,{cN:"hexcolor",b:"\\#[0-9A-F]+"},{cN:"important",b:"!important"}]}}]}]}]}}(hljs),hljs.LANGUAGES.xml=function(){var c="[A-Za-z0-9\\._:-]+",b={eW:!0,c:[{cN:"attribute",b:c,r:0},{b:'="',rB:!0,e:'"',c:[{cN:"value",b:'"',eW:!0}]},{b:"='",rB:!0,e:"'",c:[{cN:"value",b:"'",eW:!0}]},{b:"=",c:[{cN:"value",b:"[^\\s/>]+"}]}]};return{cI:!0,c:[{cN:"pi",b:"<\\?",e:"\\?>",r:10},{cN:"doctype",b:"<!DOCTYPE",e:">",r:10,c:[{b:"\\[",e:"\\]"}]},{cN:"comment",b:"<!--",e:"-->",r:10},{cN:"cdata",b:"<\\!\\[CDATA\\[",e:"\\]\\]>",r:10},{cN:"tag",b:"<style(?=\\s|>|$)",e:">",k:{title:"style"},c:[b],starts:{e:"</style>",rE:!0,sL:"css"}},{cN:"tag",b:"<script(?=\\s|>|$)",e:">",k:{title:"script"},c:[b],starts:{e:"</script>",rE:!0,sL:"javascript"}},{b:"<%",e:"%>",sL:"vbscript"},{cN:"tag",b:"</?",e:"/?>",c:[{cN:"title",b:"[^ />]+"},b]}]}}(hljs),function(definition){if("function"==typeof bootstrap)bootstrap("promise",definition);else if("object"==typeof exports)definition(void 0,exports);else if("function"==typeof define)define(definition);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=function(){var Q={};return definition(void 0,Q)}}else definition(void 0,Q={})}(function(require,exports){"use strict";function isStopIteration(exception){return"[object StopIteration]"===object_toString(exception)||exception instanceof QReturnValue}function makeStackTraceLong(error,promise){promise.stack&&"object"==typeof error&&null!==error&&error.stack&&-1===error.stack.indexOf(STACK_JUMP_SEPARATOR)&&(error.stack=filterStackString(error.stack)+"\n"+STACK_JUMP_SEPARATOR+"\n"+filterStackString(promise.stack))}function filterStackString(stackString){for(var lines=stackString.split("\n"),desiredLines=[],i=0;lines.length>i;++i){var line=lines[i];isInternalFrame(line)||isNodeFrame(line)||desiredLines.push(line)}return desiredLines.join("\n")}function isNodeFrame(stackLine){return-1!==stackLine.indexOf("(module.js:")||-1!==stackLine.indexOf("(node.js:")}function isInternalFrame(stackLine){var pieces=/at .+ \((.*):(\d+):\d+\)/.exec(stackLine);if(!pieces)return!1;var fileName=pieces[1],lineNumber=pieces[2];return fileName===qFileName&&lineNumber>=qStartingLine&&qEndingLine>=lineNumber}function captureLine(){if(Error.captureStackTrace){var fileName,lineNumber,oldPrepareStackTrace=Error.prepareStackTrace;return Error.prepareStackTrace=function(error,frames){fileName=frames[1].getFileName(),lineNumber=frames[1].getLineNumber()},Error().stack,Error.prepareStackTrace=oldPrepareStackTrace,qFileName=fileName,lineNumber}}function deprecate(callback,name,alternative){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(name+" is deprecated, use "+alternative+" instead.",Error("").stack),callback.apply(callback,arguments)}}function defer(){function become(resolvedValue){pending&&(value=resolve(resolvedValue),array_reduce(pending,function(undefined,pending){nextTick(function(){value.promiseSend.apply(value,pending)})},void 0),pending=void 0,progressListeners=void 0)}var value,pending=[],progressListeners=[],deferred=object_create(defer.prototype),promise=object_create(makePromise.prototype);return promise.promiseSend=function(op,_,__,progress){var args=array_slice(arguments);pending?(pending.push(args),"when"===op&&progress&&progressListeners.push(progress)):nextTick(function(){value.promiseSend.apply(value,args)})},promise.valueOf=function(){return pending?promise:value.valueOf()},Error.captureStackTrace&&(Error.captureStackTrace(promise,defer),promise.stack=promise.stack.substring(promise.stack.indexOf("\n")+1)),defend(promise),deferred.promise=promise,deferred.resolve=become,deferred.reject=function(exception){become(reject(exception))},deferred.notify=function(progress){pending&&array_reduce(progressListeners,function(undefined,progressListener){nextTick(function(){progressListener(progress)})},void 0)},deferred}function promise(makePromise){var deferred=defer();return fcall(makePromise,deferred.resolve,deferred.reject,deferred.notify).fail(deferred.reject),deferred.promise}function makePromise(descriptor,fallback,valueOf,exception){void 0===fallback&&(fallback=function(op){return reject(Error("Promise does not support operation: "+op))});var promise=object_create(makePromise.prototype);return promise.promiseSend=function(op,resolved){var result,args=array_slice(arguments,2);try{result=descriptor[op]?descriptor[op].apply(promise,args):fallback.apply(promise,[op].concat(args))}catch(exception){result=reject(exception)}resolved&&resolved(result)},valueOf&&(promise.valueOf=valueOf),exception&&(promise.exception=exception),defend(promise),promise}function valueOf(value){return isPromise(value)?value.valueOf():value}function isPromise(object){return object&&"function"==typeof object.promiseSend}function isResolved(object){return isFulfilled(object)||isRejected(object)}function isFulfilled(object){return!isPromise(valueOf(object))}function isRejected(object){return object=valueOf(object),isPromise(object)&&"exception"in object}function displayErrors(){errorsDisplayed||"undefined"==typeof window||window.Touch||!window.console||console.log("Should be empty:",errors),errorsDisplayed=!0}function reject(exception){exception=exception||Error();var rejection=makePromise({when:function(rejected){if(rejected){var at=array_indexOf(rejections,this);-1!==at&&(errors.splice(at,1),rejections.splice(at,1))}return rejected?rejected(exception):reject(exception)}},function(){return reject(exception)},function(){return this},exception);return displayErrors(),rejections.push(rejection),errors.push(exception),rejection}function resolve(object){if(isPromise(object))return object;if(object=valueOf(object),object&&"function"==typeof object.then){var deferred=defer();return object.then(deferred.resolve,deferred.reject,deferred.notify),deferred.promise}return makePromise({when:function(){return object},get:function(name){return object[name]},put:function(name,value){return object[name]=value,object},del:function(name){return delete object[name],object},post:function(name,value){return object[name].apply(object,value)},apply:function(self,args){return object.apply(self,args)},fapply:function(args){return object.apply(void 0,args)},viewInfo:function(){function fixFalsyProperty(name){properties[name]||(properties[name]=typeof on[name])}for(var on=object,properties={};on;)Object.getOwnPropertyNames(on).forEach(fixFalsyProperty),on=Object.getPrototypeOf(on);return{type:typeof object,properties:properties}},keys:function(){return object_keys(object)}},void 0,function valueOf(){return object})}function master(object){return makePromise({isDef:function(){}},function(){var args=array_slice(arguments);return send.apply(void 0,[object].concat(args))},function(){return valueOf(object)})}function viewInfo(object,info){return object=resolve(object),info?makePromise({viewInfo:function(){return info}},function(){var args=array_slice(arguments);return send.apply(void 0,[object].concat(args))},function(){return valueOf(object)}):send(object,"viewInfo")}function view(object){return viewInfo(object).when(function(info){var view;view="function"===info.type?function(){return apply(object,void 0,arguments)}:{};var properties=info.properties||{};return object_keys(properties).forEach(function(name){"function"===properties[name]&&(view[name]=function(){return post(object,name,arguments)})}),resolve(view)})}function when(value,fulfilled,rejected,progressed){function _fulfilled(value){try{return fulfilled?fulfilled(value):value}catch(exception){return reject(exception)}}function _rejected(exception){if(rejected){makeStackTraceLong(exception,resolvedValue);try{return rejected(exception)}catch(newException){return reject(newException)}}return reject(exception)}function _progressed(value){return progressed?progressed(value):value}var deferred=defer(),done=!1,resolvedValue=resolve(value);return nextTick(function(){resolvedValue.promiseSend("when",function(value){done||(done=!0,deferred.resolve(_fulfilled(value)))},function(exception){done||(done=!0,deferred.resolve(_rejected(exception)))})}),resolvedValue.promiseSend("when",void 0,void 0,function(value){deferred.notify(_progressed(value))}),deferred.promise}function spread(promise,fulfilled,rejected){return when(promise,function(valuesOrPromises){return all(valuesOrPromises).then(function(values){return fulfilled.apply(void 0,values)},rejected)},rejected)}function async(makeGenerator){return function(){function continuer(verb,arg){var result;try{result=generator[verb](arg)}catch(exception){return isStopIteration(exception)?exception.value:reject(exception)}return when(result,callback,errback)}var generator=makeGenerator.apply(this,arguments),callback=continuer.bind(continuer,"send"),errback=continuer.bind(continuer,"throw");return callback()}}function _return(value){throw new QReturnValue(value)}function promised(callback){return function(){return all([this,all(arguments)]).spread(function(self,args){return callback.apply(self,args)})}}function sender(op){return function(object){var args=array_slice(arguments,1);return send.apply(void 0,[object,op].concat(args))}}function send(object,op){var deferred=defer(),args=array_slice(arguments,2);return object=resolve(object),nextTick(function(){object.promiseSend.apply(object,[op,deferred.resolve].concat(args))}),deferred.promise}function dispatch(object,op,args){var deferred=defer();return object=resolve(object),nextTick(function(){object.promiseSend.apply(object,[op,deferred.resolve].concat(args))}),deferred.promise}function dispatcher(op){return function(object){var args=array_slice(arguments,1);return dispatch(object,op,args)}}function call(value,thisp){var args=array_slice(arguments,2);return apply(value,thisp,args)}function fcall(value){var args=array_slice(arguments,1);return fapply(value,args)}function bind(value,thisp){var args=array_slice(arguments,2);return function(){var allArgs=args.concat(array_slice(arguments));return apply(value,thisp,allArgs)}}function fbind(value){var args=array_slice(arguments,1);return function(){var allArgs=args.concat(array_slice(arguments));return fapply(value,allArgs)}}function all(promises){return when(promises,function(promises){var countDown=promises.length;if(0===countDown)return resolve(promises);var deferred=defer();return array_reduce(promises,function(undefined,promise,index){isFulfilled(promise)?(promises[index]=valueOf(promise),0===--countDown&&deferred.resolve(promises)):when(promise,function(value){promises[index]=value,0===--countDown&&deferred.resolve(promises)}).fail(deferred.reject)},void 0),deferred.promise})}function allResolved(promises){return when(promises,function(promises){return when(all(array_map(promises,function(promise){return when(promise,noop,noop)})),function(){return array_map(promises,resolve)})})}function fail(promise,rejected){return when(promise,void 0,rejected)}function progress(promise,progressed){return when(promise,void 0,void 0,progressed)}function fin(promise,callback){return when(promise,function(value){return when(callback(),function(){return value})},function(exception){return when(callback(),function(){return reject(exception)})})}function done(promise,fulfilled,rejected,progress){function onUnhandledError(error){nextTick(function(){if(makeStackTraceLong(error,promise),!exports.onerror)throw error;exports.onerror(error)})}var promiseToHandle=fulfilled||rejected||progress?when(promise,fulfilled,rejected,progress):promise;fail(promiseToHandle,onUnhandledError)}function timeout(promise,ms){var deferred=defer(),timeoutId=setTimeout(function(){deferred.reject(Error("Timed out after "+ms+" ms"))},ms);return when(promise,function(value){clearTimeout(timeoutId),deferred.resolve(value)},function(exception){clearTimeout(timeoutId),deferred.reject(exception)}),deferred.promise}function delay(promise,timeout){void 0===timeout&&(timeout=promise,promise=void 0);var deferred=defer();return setTimeout(function(){deferred.resolve(promise)},timeout),deferred.promise}function nfapply(callback,args){var nodeArgs=array_slice(args),deferred=defer();return nodeArgs.push(deferred.makeNodeResolver()),fapply(callback,nodeArgs).fail(deferred.reject),deferred.promise}function nfcall(callback){var nodeArgs=array_slice(arguments,1),deferred=defer();return nodeArgs.push(deferred.makeNodeResolver()),fapply(callback,nodeArgs).fail(deferred.reject),deferred.promise}function nfbind(callback){var baseArgs=array_slice(arguments,1);return function(){var nodeArgs=baseArgs.concat(array_slice(arguments)),deferred=defer();return nodeArgs.push(deferred.makeNodeResolver()),fapply(callback,nodeArgs).fail(deferred.reject),deferred.promise}}function napply(callback,thisp,args){return nbind(callback,thisp).apply(void 0,args)}function ncall(callback,thisp){var args=array_slice(arguments,2);return napply(callback,thisp,args)}function nbind(callback){if(arguments.length>1){var thisp=arguments[1],args=array_slice(arguments,2),originalCallback=callback;callback=function(){var combinedArgs=args.concat(array_slice(arguments));return originalCallback.apply(thisp,combinedArgs)}}return function(){var deferred=defer(),args=array_slice(arguments);return args.push(deferred.makeNodeResolver()),fapply(callback,args).fail(deferred.reject),deferred.promise}}function npost(object,name,args){var nodeArgs=array_slice(args),deferred=defer();return nodeArgs.push(deferred.makeNodeResolver()),post(object,name,nodeArgs).fail(deferred.reject),deferred.promise}function ninvoke(object,name){var nodeArgs=array_slice(arguments,2),deferred=defer();return nodeArgs.push(deferred.makeNodeResolver()),post(object,name,nodeArgs).fail(deferred.reject),deferred.promise}function nodeify(promise,nodeback){return nodeback?(promise.then(function(value){nextTick(function(){nodeback(null,value)})},function(error){nextTick(function(){nodeback(error)})}),void 0):promise}var qFileName,qStartingLine=captureLine(),noop=function(){},defend=Object.freeze||noop;"undefined"!=typeof cajaVM&&(defend=cajaVM.def);var nextTick;if("undefined"!=typeof process)nextTick=process.nextTick;else if("function"==typeof setImmediate)nextTick=setImmediate;else if("undefined"!=typeof MessageChannel){var channel=new MessageChannel,head={},tail=head;channel.port1.onmessage=function(){head=head.next;var task=head.task;delete head.task,task()},nextTick=function(task){tail=tail.next={task:task},channel.port2.postMessage(0)}}else nextTick=function(task){setTimeout(task,0)};var uncurryThis;if(Function.prototype.bind){var Function_bind=Function.prototype.bind;uncurryThis=Function_bind.bind(Function_bind.call)}else uncurryThis=function(f){return function(){return f.call.apply(f,arguments)}};var QReturnValue,array_slice=uncurryThis(Array.prototype.slice),array_reduce=uncurryThis(Array.prototype.reduce||function(callback,basis){var index=0,length=this.length;if(1===arguments.length)for(;;){if(index in this){basis=this[index++];break}if(++index>=length)throw new TypeError}for(;length>index;index++)index in this&&(basis=callback(basis,this[index],index));return basis}),array_indexOf=uncurryThis(Array.prototype.indexOf||function(value){for(var i=0;this.length>i;i++)if(this[i]===value)return i;return-1}),array_map=uncurryThis(Array.prototype.map||function(callback,thisp){var self=this,collect=[];return array_reduce(self,function(undefined,value,index){collect.push(callback.call(thisp,value,index,self))},void 0),collect}),object_create=Object.create||function(prototype){function Type(){}return Type.prototype=prototype,new Type},object_keys=Object.keys||function(object){var keys=[];for(var key in object)keys.push(key);return keys},object_toString=Object.prototype.toString;QReturnValue="undefined"!=typeof ReturnValue?ReturnValue:function(value){this.value=value};var STACK_JUMP_SEPARATOR="From previous event:";exports.nextTick=nextTick,exports.defer=defer,defer.prototype.makeNodeResolver=function(){var self=this;return function(error,value){error?self.reject(error):arguments.length>2?self.resolve(array_slice(arguments,1)):self.resolve(value)}},defer.prototype.node=deprecate(defer.prototype.makeNodeResolver,"node","makeNodeResolver"),exports.promise=promise,exports.makePromise=makePromise,makePromise.prototype.then=function(fulfilled,rejected,progressed){return when(this,fulfilled,rejected,progressed)},makePromise.prototype.thenResolve=function(value){return when(this,function(){return value})},array_reduce(["isResolved","isFulfilled","isRejected","when","spread","send","get","put","del","post","invoke","keys","apply","call","bind","fapply","fcall","fbind","all","allResolved","view","viewInfo","timeout","delay","catch","finally","fail","fin","progress","end","done","nfcall","nfapply","nfbind","ncall","napply","nbind","npost","ninvoke","nend","nodeify"],function(undefined,name){makePromise.prototype[name]=function(){return exports[name].apply(exports,[this].concat(array_slice(arguments)))}},void 0),makePromise.prototype.toSource=function(){return""+this},makePromise.prototype.toString=function(){return"[object Promise]"},defend(makePromise.prototype),exports.nearer=valueOf,exports.isPromise=isPromise,exports.isResolved=isResolved,exports.isFulfilled=isFulfilled,exports.isRejected=isRejected;var errorsDisplayed,rejections=[],errors=[];exports.reject=reject,exports.begin=resolve,exports.resolve=resolve,exports.ref=deprecate(resolve,"ref","resolve"),exports.master=master,exports.viewInfo=viewInfo,exports.view=view,exports.when=when,exports.spread=spread,exports.async=async,exports["return"]=_return,exports.promised=promised,exports.sender=deprecate(sender,"sender","dispatcher"),exports.Method=deprecate(sender,"Method","dispatcher"),exports.send=deprecate(send,"send","dispatch"),exports.dispatch=dispatch,exports.dispatcher=dispatcher,exports.get=dispatcher("get"),exports.put=dispatcher("put"),exports["delete"]=exports.del=dispatcher("del");var post=exports.post=dispatcher("post");exports.invoke=function(value,name){var args=array_slice(arguments,2);return post(value,name,args)};var apply=exports.apply=deprecate(dispatcher("apply"),"apply","fapply"),fapply=exports.fapply=dispatcher("fapply");exports.call=deprecate(call,"call","fcall"),exports["try"]=fcall,exports.fcall=fcall,exports.bind=deprecate(bind,"bind","fbind"),exports.fbind=fbind,exports.keys=dispatcher("keys"),exports.all=all,exports.allResolved=allResolved,exports["catch"]=exports.fail=fail,exports.progress=progress,exports["finally"]=exports.fin=fin,exports.end=deprecate(done,"end","done"),exports.done=done,exports.timeout=timeout,exports.delay=delay,exports.nfapply=nfapply,exports.nfcall=nfcall,exports.nfbind=nfbind,exports.napply=deprecate(napply,"napply","npost"),exports.ncall=deprecate(ncall,"ncall","ninvoke"),exports.nbind=deprecate(nbind,"nbind","nfbind"),exports.npost=npost,exports.ninvoke=ninvoke,exports.nend=deprecate(nodeify,"nend","nodeify"),exports.nodeify=nodeify;var qEndingLine=captureLine()}),function(root,factory){"object"==typeof exports&&exports?module.exports=factory:"function"==typeof define&&define.amd?define(factory):root.Mustache=factory}(this,function(){function testRe(re,string){return RegExp.prototype.test.call(re,string)}function isWhitespace(string){return!testRe(nonSpaceRe,string)}function escapeRe(string){return string.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function escapeHtml(string){return(string+"").replace(/[&<>"'\/]/g,function(s){return entityMap[s]})}function Scanner(string){this.string=string,this.tail=string,this.pos=0}function Context(view,parent){this.view=view,this.parent=parent,this.clearCache()}function Writer(){this.clearCache()}function compileTokens(tokens){function subRender(i,tokens,template){if(!subRenders[i]){var fn=compileTokens(tokens);subRenders[i]=function(writer,context){return fn(writer,context,template)}}return subRenders[i]}var subRenders={};return function(writer,context,template){for(var token,sectionText,buffer="",i=0,len=tokens.length;len>i;++i)switch(token=tokens[i],token[0]){case"#":sectionText=template.slice(token[3],token[5]),buffer+=writer._section(token[1],context,sectionText,subRender(i,token[4],template));break;case"^":buffer+=writer._inverted(token[1],context,subRender(i,token[4],template));break;case">":buffer+=writer._partial(token[1],context);break;case"&":buffer+=writer._name(token[1],context);break;case"name":buffer+=writer._escaped(token[1],context);break;case"text":buffer+=token[1]}return buffer}}function nestTokens(tokens){for(var token,tree=[],collector=tree,sections=[],i=0,len=tokens.length;len>i;++i)switch(token=tokens[i],token[0]){case"#":case"^":sections.push(token),collector.push(token),collector=token[4]=[];break;case"/":var section=sections.pop();section[5]=token[2],collector=sections.length>0?sections[sections.length-1][4]:tree;break;default:collector.push(token)}return tree}function squashTokens(tokens){for(var token,lastToken,squashedTokens=[],i=0,len=tokens.length;len>i;++i)token=tokens[i],"text"===token[0]&&lastToken&&"text"===lastToken[0]?(lastToken[1]+=token[1],lastToken[3]=token[3]):(lastToken=token,squashedTokens.push(token));return squashedTokens}function escapeTags(tags){return[RegExp(escapeRe(tags[0])+"\\s*"),RegExp("\\s*"+escapeRe(tags[1]))]}var exports={};exports.name="mustache.js",exports.version="0.7.2",exports.tags=["{{","}}"],exports.Scanner=Scanner,exports.Context=Context,exports.Writer=Writer;var whiteRe=/\s*/,spaceRe=/\s+/,nonSpaceRe=/\S/,eqRe=/\s*=/,curlyRe=/\s*\}/,tagRe=/#|\^|\/|>|\{|&|=|!/,isArray=Array.isArray||function(obj){return"[object Array]"===Object.prototype.toString.call(obj)},entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};exports.escape=escapeHtml,Scanner.prototype.eos=function(){return""===this.tail},Scanner.prototype.scan=function(re){var match=this.tail.match(re);return match&&0===match.index?(this.tail=this.tail.substring(match[0].length),this.pos+=match[0].length,match[0]):""},Scanner.prototype.scanUntil=function(re){var match,pos=this.tail.search(re);switch(pos){case-1:match=this.tail,this.pos+=this.tail.length,this.tail="";break;case 0:match="";break;default:match=this.tail.substring(0,pos),this.tail=this.tail.substring(pos),this.pos+=pos}return match},Context.make=function(view){return view instanceof Context?view:new Context(view)},Context.prototype.clearCache=function(){this._cache={}},Context.prototype.push=function(view){return new Context(view,this)},Context.prototype.lookup=function(name){var value=this._cache[name];if(!value){if("."===name)value=this.view;else for(var context=this;context;){if(name.indexOf(".")>0){var names=name.split("."),i=0;for(value=context.view;value&&names.length>i;)value=value[names[i++]]}else value=context.view[name];if(null!=value)break;context=context.parent}this._cache[name]=value}return"function"==typeof value&&(value=value.call(this.view)),value},Writer.prototype.clearCache=function(){this._cache={},this._partialCache={}},Writer.prototype.compile=function(template,tags){var fn=this._cache[template];if(!fn){var tokens=exports.parse(template,tags);fn=this._cache[template]=this.compileTokens(tokens,template)}return fn},Writer.prototype.compilePartial=function(name,template,tags){var fn=this.compile(template,tags);return this._partialCache[name]=fn,fn},Writer.prototype.compileTokens=function(tokens,template){var fn=compileTokens(tokens),self=this;return function(view,partials){if(partials)if("function"==typeof partials)self._loadPartial=partials;else for(var name in partials)self.compilePartial(name,partials[name]);return fn(self,Context.make(view),template)}},Writer.prototype.render=function(template,view,partials){return this.compile(template)(view,partials)},Writer.prototype._section=function(name,context,text,callback){var value=context.lookup(name);switch(typeof value){case"object":if(isArray(value)){for(var buffer="",i=0,len=value.length;len>i;++i)buffer+=callback(this,context.push(value[i]));return buffer}return value?callback(this,context.push(value)):"";case"function":var self=this,scopedRender=function(template){return self.render(template,context)},result=value.call(context.view,text,scopedRender);return null!=result?result:"";default:if(value)return callback(this,context)}return""},Writer.prototype._inverted=function(name,context,callback){var value=context.lookup(name);return!value||isArray(value)&&0===value.length?callback(this,context):""},Writer.prototype._partial=function(name,context){name in this._partialCache||!this._loadPartial||this.compilePartial(name,this._loadPartial(name));var fn=this._partialCache[name];return fn?fn(context):""},Writer.prototype._name=function(name,context){var value=context.lookup(name);
return"function"==typeof value&&(value=value.call(context.view)),null==value?"":value+""},Writer.prototype._escaped=function(name,context){return exports.escape(this._name(name,context))},exports.parse=function(template,tags){function stripSpace(){if(hasTag&&!nonSpace)for(;spaces.length;)tokens.splice(spaces.pop(),1);else spaces=[];hasTag=!1,nonSpace=!1}if(template=template||"",tags=tags||exports.tags,"string"==typeof tags&&(tags=tags.split(spaceRe)),2!==tags.length)throw Error("Invalid tags: "+tags.join(", "));for(var start,type,value,chr,tagRes=escapeTags(tags),scanner=new Scanner(template),sections=[],tokens=[],spaces=[],hasTag=!1,nonSpace=!1;!scanner.eos();){if(start=scanner.pos,value=scanner.scanUntil(tagRes[0]))for(var i=0,len=value.length;len>i;++i)chr=value.charAt(i),isWhitespace(chr)?spaces.push(tokens.length):nonSpace=!0,tokens.push(["text",chr,start,start+1]),start+=1,"\n"===chr&&stripSpace();if(start=scanner.pos,!scanner.scan(tagRes[0]))break;if(hasTag=!0,type=scanner.scan(tagRe)||"name",scanner.scan(whiteRe),"="===type)value=scanner.scanUntil(eqRe),scanner.scan(eqRe),scanner.scanUntil(tagRes[1]);else if("{"===type){var closeRe=RegExp("\\s*"+escapeRe("}"+tags[1]));value=scanner.scanUntil(closeRe),scanner.scan(curlyRe),scanner.scanUntil(tagRes[1]),type="&"}else value=scanner.scanUntil(tagRes[1]);if(!scanner.scan(tagRes[1]))throw Error("Unclosed tag at "+scanner.pos);if("/"===type){if(0===sections.length)throw Error('Unopened section "'+value+'" at '+start);var section=sections.pop();if(section[1]!==value)throw Error('Unclosed section "'+section[1]+'" at '+start)}var token=[type,value,start,scanner.pos];if(tokens.push(token),"#"===type||"^"===type)sections.push(token);else if("name"===type||"{"===type||"&"===type)nonSpace=!0;else if("="===type){if(tags=value.split(spaceRe),2!==tags.length)throw Error("Invalid tags at "+start+": "+tags.join(", "));tagRes=escapeTags(tags)}}var section=sections.pop();if(section)throw Error('Unclosed section "'+section[1]+'" at '+scanner.pos);return nestTokens(squashTokens(tokens))};var _writer=new Writer;return exports.clearCache=function(){return _writer.clearCache()},exports.compile=function(template,tags){return _writer.compile(template,tags)},exports.compilePartial=function(name,template,tags){return _writer.compilePartial(name,template,tags)},exports.compileTokens=function(tokens,template){return _writer.compileTokens(tokens,template)},exports.render=function(template,view,partials){return _writer.render(template,view,partials)},exports.to_html=function(template,view,partials,send){var result=exports.render(template,view,partials);return"function"!=typeof send?result:(send(result),void 0)},exports}());var rq={};rq.get=function(url){var deferred=Q.defer(),req=new XMLHttpRequest;return req.open("get",url),req.setRequestHeader("X-Requested-With","XMLHttpRequest"),req.addEventListener("load",function(){deferred.resolve(req)}),req.addEventListener("error",function(){deferred.reject(req)}),req.send(),deferred.promise},rq.getJson=function(url){return rq.get(url).then(function(req){return JSON.parse(req.responseText)})},function(){var utils={},easings={easeInQuad:"cubic-bezier(0.550, 0.085, 0.680, 0.530)",easeInCubic:"cubic-bezier(0.550, 0.055, 0.675, 0.190)",easeInQuart:"cubic-bezier(0.895, 0.030, 0.685, 0.220)",easeInQuint:"cubic-bezier(0.755, 0.050, 0.855, 0.060)",easeInSine:"cubic-bezier(0.470, 0.000, 0.745, 0.715)",easeInExpo:"cubic-bezier(0.950, 0.050, 0.795, 0.035)",easeInCirc:"cubic-bezier(0.600, 0.040, 0.980, 0.335)",easeOutQuad:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",easeOutCubic:"cubic-bezier(0.215, 0.610, 0.355, 1.000)",easeOutQuart:"cubic-bezier(0.165, 0.840, 0.440, 1.000)",easeOutQuint:"cubic-bezier(0.230, 1.000, 0.320, 1.000)",easeOutSine:"cubic-bezier(0.390, 0.575, 0.565, 1.000)",easeOutExpo:"cubic-bezier(0.190, 1.000, 0.220, 1.000)",easeOutCirc:"cubic-bezier(0.075, 0.820, 0.165, 1.000)",easeInOutQuad:"cubic-bezier(0.455, 0.030, 0.515, 0.955)",easeInOutCubic:"cubic-bezier(0.645, 0.045, 0.355, 1.000)",easeInOutQuart:"cubic-bezier(0.770, 0.000, 0.175, 1.000)",easeInOutQuint:"cubic-bezier(0.860, 0.000, 0.070, 1.000)",easeInOutSine:"cubic-bezier(0.445, 0.050, 0.550, 0.950)",easeInOutExpo:"cubic-bezier(1.000, 0.000, 0.000, 1.000)",easeInOutCirc:"cubic-bezier(0.785, 0.135, 0.150, 0.860)"},transitionend=["transitionend","webkitTransitionEnd","oTransitionEnd"],getCssPropName=function(){var style=document.body.style,prefixes=["Webkit","O","Ms","Moz"],cache={};return function(propertyName){if(propertyName in cache)return cache[propertyName];var upperCamelPropertyName,supportedValue="",i=prefixes.length,camelPropertyName=propertyName.replace(/-([a-z])/gi,function(all,letter){return letter.toUpperCase()});if(camelPropertyName in style)supportedValue=propertyName;else for(upperCamelPropertyName=camelPropertyName.slice(0,1).toUpperCase()+camelPropertyName.slice(1);i--;)if(prefixes[i]+upperCamelPropertyName in style){supportedValue=prefixes[i]+upperCamelPropertyName;break}return cache[propertyName]=supportedValue}}();utils.css=function(el,prop,val){return void 0===val?window.getComputedStyle(el)[getCssPropName(prop)]:(el.style[getCssPropName(prop)]=val,void 0)},utils.transition=function(el,props,duration,easing){function complete(event){event.target==el&&(transitionend.forEach(function(eventName){el.removeEventListener(eventName,complete)}),el.style[getCssPropName("transition")]="",el.offsetWidth,deferred.resolve())}var translatedProp,prop,translatedProps={},propsStr="",deferred=Q.defer();for(prop in props)translatedProp=getCssPropName(prop),translatedProp&&(translatedProps[prop]=props[prop],propsStr+=(propsStr?",":"")+prop);el.offsetWidth,transitionend.forEach(function(eventName){el.addEventListener(eventName,complete)}),el.style[getCssPropName("transition")]="all "+duration+"s "+(easings[easing||"easeInOutQuad"]||easing),el.style[getCssPropName("transition-property")]=propsStr;for(prop in translatedProps)el.style[getCssPropName(prop)]=translatedProps[prop];return deferred.promise},utils.elFromStr=function(){var div=document.createElement("div");return function(str){div.innerHTML=str.trim();var elm=div.firstChild;return div.removeChild(div.firstChild),elm}}(),utils.emptyEl=function(el){for(;el.lastChild;)el.removeChild(el.lastChild)},utils.loadTemplate=function(selector){var elm=document.querySelector(selector);return"text/html"==elm.type?utils.elFromStr(elm.textContent):"application/x-mustache"==elm.type?Mustache.compile(elm.textContent):void 0},rq.utils=utils}(),rq.EventEmitter=function(){},rq.EventEmitter.prototype={on:function(event,fct){return this._events=this._events||{},this._events[event]=this._events[event]||[],this._events[event].push(fct),this},one:function(event,fct){function wrappedFct(){fct.apply(this,arguments),microEvent.off(event,wrappedFct),delete fct.wrappedFct}var microEvent=this;return fct.wrappedFct=wrappedFct,this.on(event,wrappedFct)},off:function(event,fct){return event?fct?(fct=fct.wrappedFct||fct,this._events=this._events||{},event in this._events==!1?this:(this._events[event].splice(this._events[event].indexOf(fct),1),this)):(delete this._events[event],this):(delete this._events,this)},trigger:function(event){if(this._events=this._events||{},event in this._events!=!1){for(var i=0;this._events[event].length>i;i++)this._events[event][i].apply(this,Array.prototype.slice.call(arguments,1));return this}}},function(){function QuestionModel(num,data){var questionModel=this;questionModel.num=num,questionModel.id=data.id,questionModel.title=data.title,questionModel.lang=data.lang,questionModel.langClass=formatMap[data.lang],questionModel.requestDesc=data.requestDesc||data.expectedRequest;var lines=[];questionModel.phases=data.phases.map(function(phase){return phase.removeLines&&lines.splice(-phase.removeLines),phase.addLines&&lines.push.apply(lines,phase.addLines),{code:hljs.highlight(formatMap[questionModel.lang],lines.join("\n")).value,explanation:phase.explanation}}),questionModel.browserAnswer=data.answer}var formatMap={js:"javascript",html:"xml",css:"css"},QuestionModelProto=QuestionModel.prototype;QuestionModelProto.browsersForPhase=function(phaseNum){var questionModel=this;return Object.keys(questionModel.browserAnswer).filter(function(key){return questionModel.browserAnswer[key]==phaseNum})},rq.QuestionModel=QuestionModel}(),function(){function QuestionController(model,ui){var questionController=this;questionController.listeners_=[],questionController.phase_=-1,questionController.ui=ui,questionController.model_=model,ui.setQuestion(model.num,model.title,model.requestDesc),questionController.ui.on("answerYes",function(){questionController.handleAnswer_(!0)}),questionController.ui.on("answerNo",function(){questionController.handleAnswer_(!1)}),questionController.ui.on("continue",function(){questionController.nextPhase_()}),questionController.nextPhase_()}var QuestionControllerProto=QuestionController.prototype=Object.create(rq.EventEmitter.prototype);QuestionControllerProto.start=function(){this.ui.setInteractivity(!0)},QuestionControllerProto.handleAnswer_=function(userAnswer){var browsers=this.model_.browsersForPhase(this.phase_),makesRequest=!!browsers.length,wasCorrect=makesRequest==userAnswer;this.trigger("phaseAnswered",{wasCorrect:wasCorrect}),this.ui.showAnswer(wasCorrect,browsers,this.model_.phases[this.phase_].explanation)},QuestionControllerProto.nextPhase_=function(){this.phase_++;var phaseObj=this.model_.phases[this.phase_];phaseObj?this.phase_?this.ui.continueQuestion(this.model_.langClass,phaseObj.code):this.ui.showPhaseCode(this.model_.langClass,phaseObj.code):this.end_()},QuestionControllerProto.end_=function(){this.trigger("continue"),this.ui.setInteractivity(!1)},rq.QuestionController=QuestionController}(),function(){function QuizUi(questionUis){this.intro_=document.querySelector(".intro"),this.finalResults_=rq.utils.loadTemplate(".final-results-template"),this.score_=rq.utils.loadTemplate(".score-template"),this.reset_=rq.utils.loadTemplate(".reset-template"),this.finalResultsContentTemplate_=rq.utils.loadTemplate(".final-results-content-template"),this.container_=document.querySelector(".quiz-container"),this.questions_=this.container_.querySelector(".questions"),this.scoreNum_=this.score_.querySelector(".num"),this.review_=this.finalResults_.querySelector(".review"),this.questionUis_=questionUis,this.questionRotations_=[],this.viewMode_="intro",document.body.appendChild(this.container_),this.intro_.parentNode.removeChild(this.intro_),this.enhanceIntro_(),this.enhanceReset_(),this.layoutQuestions_()}var QuizUiProto=QuizUi.prototype=Object.create(rq.EventEmitter.prototype);QuizUiProto.enhanceReset_=function(){function reset(event){quizUi.trigger("resetSelected"),event.preventDefault()}var quizUi=this;quizUi.reset_.querySelector(".reset-btn").addEventListener("click",reset),quizUi.finalResults_.querySelector(".reset-btn").addEventListener("click",reset)},QuizUiProto.enhanceIntro_=function(){var quizUi=this;quizUi.intro_.querySelector(".start-btn").addEventListener("click",function(event){quizUi.trigger("startQuizBtnSelected"),event.preventDefault()})},QuizUiProto.layoutQuestions_=function(){var quizUi=this;quizUi.questionUis_.forEach(function(questionUi,i){quizUi.questions_.appendChild(questionUi.container),quizUi.questionRotations_[i]=360*(i/quizUi.questionUis_.length),rq.utils.css(questionUi.container,"transform","rotateY("+quizUi.questionRotations_[i]+"deg) translateZ(1300px)")})},QuizUiProto.showIntro=function(){this.container_.appendChild(this.intro_)},QuizUiProto.showQuestion=function(num){var easing="easeInOutQuad",duration=.5;"intro"==this.viewMode_&&(rq.utils.css(this.questions_,"transform"),this.toQuestionView_(),this.questions_.classList.remove("spin"),rq.utils.css(this.questions_,"transform","rotateY(700deg)"),easing="easeOutQuart",duration=3),rq.utils.transition(this.questions_,{transform:"rotateY("+-this.questionRotations_[num]+"deg)"},duration,easing)},QuizUiProto.toQuestionView_=function(){rq.utils.transition(this.container_,{transform:"translateZ(-1300px)"},2,"easeInOutQuad"),this.viewMode_="question"},QuizUiProto.score=function(score){this.scoreNum_.textContent=score},QuizUiProto.showFinalResults=function(score,maxScore){emptyEl(this.container_);var review="Review TODO";this.review_.innerHTML=this.finalResultsContentTemplate_({score:score,scoreSingular:1===score,maxScore:maxScore,review:review}),this.container_.appendChild(this.finalResults_)},rq.QuizUi=QuizUi}(),function(){function toArray(arrayLike){return Array.prototype.slice.call(arrayLike)}function QuestionUi(){this.container=rq.utils.loadTemplate(".question-template"),this.question_=this.container.querySelector(".question"),this.answerContentTemplate_=rq.utils.loadTemplate(".answer-content-template"),this.questionTitle_=this.question_.querySelector(".question-title"),this.questionNum_=this.question_.querySelector(".title .num"),this.questionTotal_=this.question_.querySelector(".title .total"),this.questionRequest_=this.question_.querySelector(".request"),this.questionCodeContainer_=this.question_.querySelector(".phase-code"),this.questionCode_=this.question_.querySelector(".phase-code code"),this.questionButtons_=this.question_.querySelector(".answer-buttons"),this.answerFeedback_=this.question_.querySelector(".answer-feedback"),this.feedbackContent_=this.question_.querySelector(".feedback-content"),this.browserIcons_=this.question_.querySelector(".browsers-remaining"),this.enhanceQuestion_()}var browserMap={ie:"IE",chrome:"Chrome",firefox:"Firefox",safari:"Safari"},QuestionUiProto=QuestionUi.prototype=Object.create(rq.EventEmitter.prototype);QuestionUiProto.enhanceQuestion_=function(){var quizUi=this;quizUi.question_.querySelector(".yes-btn").addEventListener("click",function(event){quizUi.trigger("answerYes"),event.preventDefault()}),quizUi.question_.querySelector(".no-btn").addEventListener("click",function(event){quizUi.trigger("answerNo"),event.preventDefault()}),quizUi.question_.querySelector(".continue-btn").addEventListener("click",function(event){quizUi.trigger("continue"),event.preventDefault()})},QuestionUiProto.setQuestionTotal=function(total){this.questionTotal_.textContent=total},QuestionUiProto.setQuestion=function(num,title,requestDesc){this.questionNum_.textContent=num,this.questionTitle_.textContent=title,this.questionRequest_.textContent=requestDesc},QuestionUiProto.setInteractivity=function(state){this.container.style.pointerEvents=state?"auto":"none"},QuestionUiProto.showAnswer=function(wasCorrect,browsers,explanation){var quizUi=this;browsers.forEach(function(browser){quizUi.question_.querySelector("."+browser).classList.add("active")});var browserStr=browsers.reduce(function(str,browser,i){return i>0&&(str+=i==browsers.length-1?" & ":", "),str+=browserMap[browser]},"");quizUi.feedbackContent_.innerHTML=quizUi.answerContentTemplate_({wasCorrect:wasCorrect,browsers:browserStr,explanation:explanation}),wasCorrect?(quizUi.answerFeedback_.classList.add("correct"),quizUi.answerFeedback_.classList.remove("incorrect")):(quizUi.answerFeedback_.classList.remove("correct"),quizUi.answerFeedback_.classList.add("incorrect")),rq.utils.transition(quizUi.questionButtons_,{transform:"rotateX(-90deg)"},.3).then(function(){return quizUi.browserIcons_.classList.add("reveal"),quizUi.answerFeedback_.style.display="block",rq.utils.css(quizUi.answerFeedback_,"transform","rotateX(-90deg)"),rq.utils.transition(quizUi.question_,{transform:"translate(0, "+Math.floor((quizUi.questionButtons_.offsetHeight-quizUi.answerFeedback_.offsetHeight)/2)+"px)"},.3),rq.utils.transition(quizUi.answerFeedback_,{transform:"rotateX(0deg)"},.3)})},QuestionUiProto.score=function(score){this.scoreNum_.textContent=score},QuestionUiProto.continueQuestion=function(lang,code){var quizUi=this;toArray(quizUi.question_.querySelectorAll(".browsers-remaining .active")).forEach(function(activeEl){activeEl.classList.remove("active"),activeEl.classList.add("inactive")}),rq.utils.transition(quizUi.question_,{transform:"translate(0, 0)"},.3),rq.utils.transition(quizUi.answerFeedback_,{transform:"rotateX(-90deg)"},.3).then(function(){return quizUi.questionCodeContainer_.style.height=quizUi.questionCodeContainer_.offsetHeight+"px",rq.utils.transition(quizUi.questionCodeContainer_,{height:"0"},.3)}).then(function(){quizUi.showPhaseCode(lang,code),quizUi.questionCodeContainer_.style.height="";var heightTo=quizUi.questionCodeContainer_.offsetHeight;return quizUi.questionCodeContainer_.style.height="0",rq.utils.transition(quizUi.questionCodeContainer_,{height:heightTo+"px"},.3).then(function(){quizUi.questionCodeContainer_.style.height=""})}).then(function(){return rq.utils.transition(quizUi.questionButtons_,{transform:"rotateX(0deg)"},.3)}).then(function(){quizUi.questionButtons_.style.display="block",quizUi.answerFeedback_.style.display="none"}),quizUi.browserIcons_.classList.remove("reveal"),quizUi.question_.classList.remove("first-phase")},QuestionUiProto.showPhaseCode=function(lang,code){this.questionCode_.className=lang,this.questionCode_.innerHTML=code},rq.QuestionUi=QuestionUi}(),function(){function QuizModel(data){this.questions=data.map(function(questionSpec,i){return new rq.QuestionModel(i+1,questionSpec)}),this.score=0}var QuizModelProto=QuizModel.prototype;Object.defineProperty(QuizModelProto,"maxScore",{get:function(){return this.questions.reduce(function(total,question){return total+question.phases.length},0)}}),rq.QuizModel=QuizModel}(),function(){function QuizController(){var quizController=this;quizController.ready_=rq.getJson("quiz-data.json").then(function(data){quizController.model_=new rq.QuizModel(data),quizController.questionControllers_=quizController.model_.questions.map(function(question){var ui=new rq.QuestionUi,questionController=new rq.QuestionController(question,ui);return ui.setQuestionTotal(quizController.model_.questions.length),questionController.on("continue",quizController.nextQuestion_.bind(quizController)),questionController.on("phaseAnswered",function(event){event.wasCorrect&&(quizController.model_.score++,quizController.ui_.score(quizController.model_.score))}),new rq.QuestionController(question,ui)});var questionUis=quizController.questionControllers_.map(function(x){return x.ui});quizController.ui_=new rq.QuizUi(questionUis),quizController.ui_.on("startQuizBtnSelected",quizController.nextQuestion_.bind(quizController)),quizController.ui_.on("resetSelected",quizController.reset_.bind(quizController))}),quizController.questionNum_=-1}var QuizControllerProto=QuizController.prototype;QuizControllerProto.start=function(){var quizController=this;quizController.ready_.done(function(){quizController.ui_.score(quizController.model_.score),quizController.ui_.showIntro()})},QuizControllerProto.reset_=function(){this.questionNum_=-1,this.model_.score=0,this.start()},QuizControllerProto.nextQuestion_=function(){var quizController=this;quizController.questionNum_++;var questionController=quizController.questionControllers_[quizController.questionNum_];return quizController.ui_.showQuestion(quizController.questionNum_),questionController?(questionController.start(),void 0):(quizController.results_(),void 0)},QuizControllerProto.results_=function(){this.ui_.showFinalResults(this.model_.score,this.model_.maxScore)},rq.QuizController=QuizController}();
//@ sourceMappingURL=all.js.map