(function(e){if("function"==typeof bootstrap)bootstrap("promise",e);else if("object"==typeof exports)e(void 0,exports);else if("function"==typeof define)define(e);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=function(){var t={};return e(void 0,t)}}else e(void 0,Q={})})(function(e,t){"use strict";function n(e){return"[object StopIteration]"===mt(e)||e instanceof ct}function r(e,t){t.stack&&"object"==typeof e&&null!==e&&e.stack&&-1===e.stack.indexOf(yt)&&(e.stack=i(e.stack)+"\n"+yt+"\n"+i(t.stack))}function i(e){for(var t=e.split("\n"),n=[],r=0;t.length>r;++r){var i=t[r];s(i)||o(i)||n.push(i)}return n.join("\n")}function o(e){return-1!==e.indexOf("(module.js:")||-1!==e.indexOf("(node.js:")}function s(e){var t=/at .+ \((.*):(\d+):\d+\)/.exec(e);if(!t)return!1;var n=t[1],r=t[2];return n===Z&&r>=et&&xt>=r}function u(){if(Error.captureStackTrace){var e,t,n=Error.prepareStackTrace;return Error.prepareStackTrace=function(n,r){e=r[1].getFileName(),t=r[1].getLineNumber()},Error().stack,Error.prepareStackTrace=n,Z=e,t}}function a(e,t,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t+" is deprecated, use "+n+" instead.",Error("").stack),e.apply(e,arguments)}}function c(){function e(e){n&&(t=g(e),lt(n,function(e,n){rt(function(){t.promiseSend.apply(t,n)})},void 0),n=void 0,r=void 0)}var t,n=[],r=[],i=dt(c.prototype),o=dt(l.prototype);return o.promiseSend=function(e,i,o,s){var u=ft(arguments);n?(n.push(u),"when"===e&&s&&r.push(s)):rt(function(){t.promiseSend.apply(t,u)})},o.valueOf=function(){return n?o:t.valueOf()},Error.captureStackTrace&&(Error.captureStackTrace(o,c),o.stack=o.stack.substring(o.stack.indexOf("\n")+1)),nt(o),i.promise=o,i.resolve=e,i.reject=function(t){e(_(t))},i.notify=function(e){n&&lt(r,function(t,n){rt(function(){n(e)})},void 0)},i}function f(e){var t=c();return Q(e,t.resolve,t.reject,t.notify).fail(t.reject),t.promise}function l(e,t,n,r){void 0===t&&(t=function(e){return _(Error("Promise does not support operation: "+e))});var i=dt(l.prototype);return i.promiseSend=function(n,r){var o,s=ft(arguments,2);try{o=e[n]?e[n].apply(i,s):t.apply(i,[n].concat(s))}catch(u){o=_(u)}r&&r(o)},n&&(i.valueOf=n),r&&(i.exception=r),nt(i),i}function p(e){return h(e)?e.valueOf():e}function h(e){return e&&"function"==typeof e.promiseSend}function d(e){return v(e)||m(e)}function v(e){return!h(p(e))}function m(e){return e=p(e),h(e)&&"exception"in e}function y(){_t||"undefined"==typeof window||window.Touch||!window.console||console.log("Should be empty:",wt),_t=!0}function _(e){e=e||Error();var t=l({when:function(t){if(t){var n=pt(gt,this);-1!==n&&(wt.splice(n,1),gt.splice(n,1))}return t?t(e):_(e)}},function(){return _(e)},function(){return this},e);return y(),gt.push(t),wt.push(e),t}function g(e){if(h(e))return e;if(e=n(e),e&&"function"==typeof e.then){var t=c();return e.then(t.resolve,t.reject,t.notify),t.promise}return l({when:function(){return e},get:function(t){return e[t]},put:function(t,n){return e[t]=n,e},del:function(t){return delete e[t],e},post:function(t,n){return e[t].apply(e,n)},apply:function(t,n){return e.apply(t,n)},fapply:function(t){return e.apply(void 0,t)},viewInfo:function(){function t(e){r[e]||(r[e]=typeof n[e])}for(var n=e,r={};n;)Object.getOwnPropertyNames(n).forEach(t),n=Object.getPrototypeOf(n);return{type:typeof e,properties:r}},keys:function(){return vt(e)}},void 0,function n(){return e})}function w(e){return l({isDef:function(){}},function(){var t=ft(arguments);return R.apply(void 0,[e].concat(t))},function(){return p(e)})}function b(e,t){return e=g(e),t?l({viewInfo:function(){return t}},function(){var t=ft(arguments);return R.apply(void 0,[e].concat(t))},function(){return p(e)}):R(e,"viewInfo")}function k(e){return b(e).when(function(t){var n;n="function"===t.type?function(){return kt(e,void 0,arguments)}:{};var r=t.properties||{};return vt(r).forEach(function(t){"function"===r[t]&&(n[t]=function(){return bt(e,t,arguments)})}),g(n)})}function q(e,t,n,i){function o(e){try{return t?t(e):e}catch(n){return _(n)}}function s(e){if(n){r(e,l);try{return n(e)}catch(t){return _(t)}}return _(e)}function u(e){return i?i(e):e}var a=c(),f=!1,l=g(e);return rt(function(){l.promiseSend("when",function(e){f||(f=!0,a.resolve(o(e)))},function(e){f||(f=!0,a.resolve(s(e)))})}),l.promiseSend("when",void 0,void 0,function(e){a.notify(u(e))}),a.promise}function x(e,t,n){return q(e,function(e){return P(e).then(function(e){return t.apply(void 0,e)},n)},n)}function S(e){return function(){function t(e,t){var s;try{s=r[e](t)}catch(u){return n(u)?u.value:_(u)}return q(s,i,o)}var r=e.apply(this,arguments),i=t.bind(t,"send"),o=t.bind(t,"throw");return i()}}function C(e){throw new ct(e)}function j(e){return function(){return P([this,P(arguments)]).spread(function(t,n){return e.apply(t,n)})}}function E(e){return function(t){var n=ft(arguments,1);return R.apply(void 0,[t,e].concat(n))}}function R(e,t){var n=c(),r=ft(arguments,2);return e=g(e),rt(function(){e.promiseSend.apply(e,[t,n.resolve].concat(r))}),n.promise}function O(e,t,n){var r=c();return e=g(e),rt(function(){e.promiseSend.apply(e,[t,r.resolve].concat(n))}),r.promise}function T(e){return function(t){var n=ft(arguments,1);return O(t,e,n)}}function L(e,t){var n=ft(arguments,2);return kt(e,t,n)}function Q(e){var t=ft(arguments,1);return qt(e,t)}function A(e,t){var n=ft(arguments,2);return function(){var r=n.concat(ft(arguments));return kt(e,t,r)}}function N(e){var t=ft(arguments,1);return function(){var n=t.concat(ft(arguments));return qt(e,n)}}function P(e){return q(e,function(e){var t=e.length;if(0===t)return g(e);var n=c();return lt(e,function(r,i,o){v(i)?(e[o]=p(i),0===--t&&n.resolve(e)):q(i,function(r){e[o]=r,0===--t&&n.resolve(e)}).fail(n.reject)},void 0),n.promise})}function F(e){return q(e,function(e){return q(P(ht(e,function(e){return q(e,tt,tt)})),function(){return ht(e,g)})})}function M(e,t){return q(e,void 0,t)}function I(e,t){return q(e,void 0,void 0,t)}function U(e,t){return q(e,function(e){return q(t(),function(){return e})},function(e){return q(t(),function(){return _(e)})})}function z(e,n,i,o){function s(n){rt(function(){if(r(n,e),!t.onerror)throw n;t.onerror(n)})}var u=n||i||o?q(e,n,i,o):e;M(u,s)}function D(e,t){var n=c(),r=setTimeout(function(){n.reject(Error("Timed out after "+t+" ms"))},t);return q(e,function(e){clearTimeout(r),n.resolve(e)},function(e){clearTimeout(r),n.reject(e)}),n.promise}function B(e,t){void 0===t&&(t=e,e=void 0);var n=c();return setTimeout(function(){n.resolve(e)},t),n.promise}function H(e,t){var n=ft(t),r=c();return n.push(r.makeNodeResolver()),qt(e,n).fail(r.reject),r.promise}function V(e){var t=ft(arguments,1),n=c();return t.push(n.makeNodeResolver()),qt(e,t).fail(n.reject),n.promise}function J(e){var t=ft(arguments,1);return function(){var n=t.concat(ft(arguments)),r=c();return n.push(r.makeNodeResolver()),qt(e,n).fail(r.reject),r.promise}}function X(e,t,n){return Y(e,t).apply(void 0,n)}function W(e,t){var n=ft(arguments,2);return X(e,t,n)}function Y(e){if(arguments.length>1){var t=arguments[1],n=ft(arguments,2),r=e;e=function(){var e=n.concat(ft(arguments));return r.apply(t,e)}}return function(){var t=c(),n=ft(arguments);return n.push(t.makeNodeResolver()),qt(e,n).fail(t.reject),t.promise}}function $(e,t,n){var r=ft(n),i=c();return r.push(i.makeNodeResolver()),bt(e,t,r).fail(i.reject),i.promise}function G(e,t){var n=ft(arguments,2),r=c();return n.push(r.makeNodeResolver()),bt(e,t,n).fail(r.reject),r.promise}function K(e,t){return t?(e.then(function(e){rt(function(){t(null,e)})},function(e){rt(function(){t(e)})}),void 0):e}var Z,et=u(),tt=function(){},nt=Object.freeze||tt;"undefined"!=typeof cajaVM&&(nt=cajaVM.def);var rt;if("undefined"!=typeof process)rt=process.nextTick;else if("function"==typeof setImmediate)rt=setImmediate;else if("undefined"!=typeof MessageChannel){var it=new MessageChannel,ot={},st=ot;it.port1.onmessage=function(){ot=ot.next;var e=ot.task;delete ot.task,e()},rt=function(e){st=st.next={task:e},it.port2.postMessage(0)}}else rt=function(e){setTimeout(e,0)};var ut;if(Function.prototype.bind){var at=Function.prototype.bind;ut=at.bind(at.call)}else ut=function(e){return function(){return e.call.apply(e,arguments)}};var ct,ft=ut(Array.prototype.slice),lt=ut(Array.prototype.reduce||function(e,t){var n=0,r=this.length;if(1===arguments.length)for(;;){if(n in this){t=this[n++];break}if(++n>=r)throw new TypeError}for(;r>n;n++)n in this&&(t=e(t,this[n],n));return t}),pt=ut(Array.prototype.indexOf||function(e){for(var t=0;this.length>t;t++)if(this[t]===e)return t;return-1}),ht=ut(Array.prototype.map||function(e,t){var n=this,r=[];return lt(n,function(i,o,s){r.push(e.call(t,o,s,n))},void 0),r}),dt=Object.create||function(e){function t(){}return t.prototype=e,new t},vt=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t},mt=Object.prototype.toString;ct="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e};var yt="From previous event:";t.nextTick=rt,t.defer=c,c.prototype.makeNodeResolver=function(){var e=this;return function(t,n){t?e.reject(t):arguments.length>2?e.resolve(ft(arguments,1)):e.resolve(n)}},c.prototype.node=a(c.prototype.makeNodeResolver,"node","makeNodeResolver"),t.promise=f,t.makePromise=l,l.prototype.then=function(e,t,n){return q(this,e,t,n)},l.prototype.thenResolve=function(e){return q(this,function(){return e})},lt(["isResolved","isFulfilled","isRejected","when","spread","send","get","put","del","post","invoke","keys","apply","call","bind","fapply","fcall","fbind","all","allResolved","view","viewInfo","timeout","delay","catch","finally","fail","fin","progress","end","done","nfcall","nfapply","nfbind","ncall","napply","nbind","npost","ninvoke","nend","nodeify"],function(e,n){l.prototype[n]=function(){return t[n].apply(t,[this].concat(ft(arguments)))}},void 0),l.prototype.toSource=function(){return""+this},l.prototype.toString=function(){return"[object Promise]"},nt(l.prototype),t.nearer=p,t.isPromise=h,t.isResolved=d,t.isFulfilled=v,t.isRejected=m;var _t,gt=[],wt=[];t.reject=_,t.begin=g,t.resolve=g,t.ref=a(g,"ref","resolve"),t.master=w,t.viewInfo=b,t.view=k,t.when=q,t.spread=x,t.async=S,t["return"]=C,t.promised=j,t.sender=a(E,"sender","dispatcher"),t.Method=a(E,"Method","dispatcher"),t.send=a(R,"send","dispatch"),t.dispatch=O,t.dispatcher=T,t.get=T("get"),t.put=T("put"),t["delete"]=t.del=T("del");var bt=t.post=T("post");t.invoke=function(e,t){var n=ft(arguments,2);return bt(e,t,n)};var kt=t.apply=a(T("apply"),"apply","fapply"),qt=t.fapply=T("fapply");t.call=a(L,"call","fcall"),t["try"]=Q,t.fcall=Q,t.bind=a(A,"bind","fbind"),t.fbind=N,t.keys=T("keys"),t.all=P,t.allResolved=F,t["catch"]=t.fail=M,t.progress=I,t["finally"]=t.fin=U,t.end=a(z,"end","done"),t.done=z,t.timeout=D,t.delay=B,t.nfapply=H,t.nfcall=V,t.nfbind=J,t.napply=a(X,"napply","npost"),t.ncall=a(W,"ncall","ninvoke"),t.nbind=a(Y,"nbind","nfbind"),t.npost=$,t.ninvoke=G,t.nend=a(K,"nend","nodeify"),t.nodeify=K;var xt=u()}),function(e,t){"object"==typeof exports&&exports?module.exports=t:"function"==typeof define&&define.amd?define(t):e.Mustache=t}(this,function(){function e(e,t){return RegExp.prototype.test.call(e,t)}function t(t){return!e(d,t)}function n(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function r(e){return(e+"").replace(/[&<>"'\/]/g,function(e){return g[e]})}function i(e){this.string=e,this.tail=e,this.pos=0}function o(e,t){this.view=e,this.parent=t,this.clearCache()}function s(){this.clearCache()}function u(e){function t(e,t,r){if(!n[e]){var i=u(t);n[e]=function(e,t){return i(e,t,r)}}return n[e]}var n={};return function(n,r,i){for(var o,s,u="",a=0,c=e.length;c>a;++a)switch(o=e[a],o[0]){case"#":s=i.slice(o[3],o[5]),u+=n._section(o[1],r,s,t(a,o[4],i));break;case"^":u+=n._inverted(o[1],r,t(a,o[4],i));break;case">":u+=n._partial(o[1],r);break;case"&":u+=n._name(o[1],r);break;case"name":u+=n._escaped(o[1],r);break;case"text":u+=o[1]}return u}}function a(e){for(var t,n=[],r=n,i=[],o=0,s=e.length;s>o;++o)switch(t=e[o],t[0]){case"#":case"^":i.push(t),r.push(t),r=t[4]=[];break;case"/":var u=i.pop();u[5]=t[2],r=i.length>0?i[i.length-1][4]:n;break;default:r.push(t)}return n}function c(e){for(var t,n,r=[],i=0,o=e.length;o>i;++i)t=e[i],"text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(n=t,r.push(t));return r}function f(e){return[RegExp(n(e[0])+"\\s*"),RegExp("\\s*"+n(e[1]))]}var l={};l.name="mustache.js",l.version="0.7.2",l.tags=["{{","}}"],l.Scanner=i,l.Context=o,l.Writer=s;var p=/\s*/,h=/\s+/,d=/\S/,v=/\s*=/,m=/\s*\}/,y=/#|\^|\/|>|\{|&|=|!/,_=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};l.escape=r,i.prototype.eos=function(){return""===this.tail},i.prototype.scan=function(e){var t=this.tail.match(e);return t&&0===t.index?(this.tail=this.tail.substring(t[0].length),this.pos+=t[0].length,t[0]):""},i.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.pos+=this.tail.length,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n),this.pos+=n}return t},o.make=function(e){return e instanceof o?e:new o(e)},o.prototype.clearCache=function(){this._cache={}},o.prototype.push=function(e){return new o(e,this)},o.prototype.lookup=function(e){var t=this._cache[e];if(!t){if("."===e)t=this.view;else for(var n=this;n;){if(e.indexOf(".")>0){var r=e.split("."),i=0;for(t=n.view;t&&r.length>i;)t=t[r[i++]]}else t=n.view[e];if(null!=t)break;n=n.parent}this._cache[e]=t}return"function"==typeof t&&(t=t.call(this.view)),t},s.prototype.clearCache=function(){this._cache={},this._partialCache={}},s.prototype.compile=function(e,t){var n=this._cache[e];if(!n){var r=l.parse(e,t);n=this._cache[e]=this.compileTokens(r,e)}return n},s.prototype.compilePartial=function(e,t,n){var r=this.compile(t,n);return this._partialCache[e]=r,r},s.prototype.compileTokens=function(e,t){var n=u(e),r=this;return function(e,i){if(i)if("function"==typeof i)r._loadPartial=i;else for(var s in i)r.compilePartial(s,i[s]);return n(r,o.make(e),t)}},s.prototype.render=function(e,t,n){return this.compile(e)(t,n)},s.prototype._section=function(e,t,n,r){var i=t.lookup(e);switch(typeof i){case"object":if(_(i)){for(var o="",s=0,u=i.length;u>s;++s)o+=r(this,t.push(i[s]));return o}return i?r(this,t.push(i)):"";case"function":var a=this,c=function(e){return a.render(e,t)},f=i.call(t.view,n,c);return null!=f?f:"";default:if(i)return r(this,t)}return""},s.prototype._inverted=function(e,t,n){var r=t.lookup(e);return!r||_(r)&&0===r.length?n(this,t):""},s.prototype._partial=function(e,t){e in this._partialCache||!this._loadPartial||this.compilePartial(e,this._loadPartial(e));var n=this._partialCache[e];return n?n(t):""},s.prototype._name=function(e,t){var n=t.lookup(e);return"function"==typeof n&&(n=n.call(t.view)),null==n?"":n+""},s.prototype._escaped=function(e,t){return l.escape(this._name(e,t))},l.parse=function(e,r){function o(){if(x&&!S)for(;q.length;)k.splice(q.pop(),1);else q=[];x=!1,S=!1}if(e=e||"",r=r||l.tags,"string"==typeof r&&(r=r.split(h)),2!==r.length)throw Error("Invalid tags: "+r.join(", "));for(var s,u,d,_,g=f(r),w=new i(e),b=[],k=[],q=[],x=!1,S=!1;!w.eos();){if(s=w.pos,d=w.scanUntil(g[0]))for(var C=0,j=d.length;j>C;++C)_=d.charAt(C),t(_)?q.push(k.length):S=!0,k.push(["text",_,s,s+1]),s+=1,"\n"===_&&o();if(s=w.pos,!w.scan(g[0]))break;if(x=!0,u=w.scan(y)||"name",w.scan(p),"="===u)d=w.scanUntil(v),w.scan(v),w.scanUntil(g[1]);else if("{"===u){var E=RegExp("\\s*"+n("}"+r[1]));d=w.scanUntil(E),w.scan(m),w.scanUntil(g[1]),u="&"}else d=w.scanUntil(g[1]);if(!w.scan(g[1]))throw Error("Unclosed tag at "+w.pos);if("/"===u){if(0===b.length)throw Error('Unopened section "'+d+'" at '+s);var R=b.pop();if(R[1]!==d)throw Error('Unclosed section "'+R[1]+'" at '+s)}var O=[u,d,s,w.pos];if(k.push(O),"#"===u||"^"===u)b.push(O);else if("name"===u||"{"===u||"&"===u)S=!0;else if("="===u){if(r=d.split(h),2!==r.length)throw Error("Invalid tags at "+s+": "+r.join(", "));g=f(r)}}var R=b.pop();if(R)throw Error('Unclosed section "'+R[1]+'" at '+w.pos);return a(c(k))};var w=new s;return l.clearCache=function(){return w.clearCache()},l.compile=function(e,t){return w.compile(e,t)},l.compilePartial=function(e,t,n){return w.compilePartial(e,t,n)},l.compileTokens=function(e,t){return w.compileTokens(e,t)},l.render=function(e,t,n){return w.render(e,t,n)},l.to_html=function(e,t,n,r){var i=l.render(e,t,n);return"function"!=typeof r?i:(r(i),void 0)},l}());var rq={};rq.get=function(e){var t=Q.defer(),n=new XMLHttpRequest;return n.open("get",e),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.addEventListener("load",function(){t.resolve(n)}),n.addEventListener("error",function(){t.reject(n)}),n.send(),t.promise},rq.getJson=function(e){return rq.get(e).then(function(e){return JSON.parse(e.responseText)})},rq.EventEmitter=function(){},rq.EventEmitter.prototype={on:function(e,t){return this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t),this},one:function(e,t){function n(){t.apply(this,arguments),r.off(e,n),delete t.wrappedFct}var r=this;return t.wrappedFct=n,this.on(e,n)},off:function(e,t){return e?t?(t=t.wrappedFct||t,this._events=this._events||{},e in this._events==!1?this:(this._events[e].splice(this._events[e].indexOf(t),1),this)):(delete this._events[e],this):(delete this._events,this)},trigger:function(e){if(this._events=this._events||{},e in this._events!=!1){for(var t=0;this._events[e].length>t;t++)this._events[e][t].apply(this,Array.prototype.slice.call(arguments,1));return this}}},function(){function e(e){this.id=e.id,this.title=e.title,this.lang=e.lang,this.requestDesc=e.requestDesc||e.expectedRequest;var t=[];this.phases=e.phases.map(function(e){return e.removeLines&&t.splice(-e.removeLines),e.addLines&&t.push.apply(t,e.addLines),{code:t.join("\n"),explanation:e.explanation}}),this.browserAnswer=e.answer}var t=e.prototype;t.browsersForPhase=function(e){var t=this;return Object.keys(t.browserAnswer).filter(function(n){return t.browserAnswer[n]==e})},rq.QuestionModel=e}(),function(){function e(e,t){var n=this;n.listeners_=[],n.phase_=-1,n.ui_=t,n.model_=e,n.uiOn_("answerYes",function(){n.handleAnswer_(!0)}),n.uiOn_("answerNo",function(){n.handleAnswer_(!1)}),n.uiOn_("continue",function(){n.nextPhase_()})}var t=e.prototype=Object.create(rq.EventEmitter.prototype);t.start=function(){this.ui_.showQuestion(this.model_.title,this.model_.requestDesc),this.nextPhase_()},t.uiOn_=function(e,t){this.listeners_.push([e,t]),this.ui_.on(e,t)},t.removeUiListeners_=function(){var e=this;e.listeners_.forEach(function(t){e.ui_.off(t[0],t[1])})},t.handleAnswer_=function(e){var t=this.model_.browsersForPhase(this.phase_),n=!!t.length,r=n==e;this.trigger("phaseAnswered",{wasCorrect:r}),this.ui_.showAnswer(r,t,this.model_.phases[this.phase_].explanation)},t.nextPhase_=function(){this.phase_++;var e=this.model_.phases[this.phase_];e?(this.phase_&&this.ui_.continueQuestion(),this.ui_.showPhaseCode(e.code)):this.end_()},t.end_=function(){this.removeUiListeners_(),this.trigger("continue"),this.off()},rq.QuestionController=e}(),function(){function e(e){return Array.prototype.slice.call(e)}function t(e,t){return document.querySelector(e,t)}function n(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function r(e){var n=t(e);return"text/html"==n.type?o(n.textContent):"application/x-mustache"==n.type?Mustache.compile(n.textContent):void 0}function i(){this.intro_=t(".intro"),this.question_=r(".question-template"),this.finalResults_=r(".final-results-template"),this.score_=r(".score-template"),this.reset_=r(".reset-template"),this.finalResultsContentTemplate_=r(".final-results-content-template"),this.answerContentTemplate_=r(".answer-content-template"),this.container_=o('<div class="quiz-container"></div>'),this.questionTitle_=this.question_.querySelector(".title"),this.questionRequest_=this.question_.querySelector(".request"),this.questionCode_=this.question_.querySelector(".phase-code"),this.questionButtons_=this.question_.querySelector(".answer-buttons"),this.answerFeedback_=this.question_.querySelector(".answer-feedback"),this.feedbackContent_=this.question_.querySelector(".feedback-content"),this.scoreNum_=this.score_.querySelector(".num"),this.review_=this.finalResults_.querySelector(".review"),document.body.appendChild(this.container_),this.intro_.parentNode.removeChild(this.intro_),this.enhanceQuestion_(),this.enhanceIntro_(),this.enhanceReset_()}var o=function(){var e=document.createElement("div");return function(t){e.innerHTML=t.trim();var n=e.firstChild;return e.removeChild(e.firstChild),n}}(),s={ie:"IE",chrome:"Chrome",firefox:"Firefox",safari:"Safari"},u=i.prototype=Object.create(rq.EventEmitter.prototype);u.enhanceQuestion_=function(){var e=this;e.question_.querySelector(".yes-btn").addEventListener("click",function(t){e.trigger("answerYes"),t.preventDefault()}),e.question_.querySelector(".no-btn").addEventListener("click",function(t){e.trigger("answerNo"),t.preventDefault()}),e.question_.querySelector(".continue-btn").addEventListener("click",function(t){e.trigger("continue"),t.preventDefault()})},u.enhanceReset_=function(){function e(e){t.trigger("resetSelected"),e.preventDefault()}var t=this;t.reset_.querySelector(".reset-btn").addEventListener("click",e),t.finalResults_.querySelector(".reset-btn").addEventListener("click",e)},u.enhanceIntro_=function(){var e=this;e.intro_.querySelector(".start-btn").addEventListener("click",function(t){e.trigger("startQuizBtnSelected"),t.preventDefault()})},u.showIntro=function(){n(this.container_),this.container_.appendChild(this.intro_)},u.showQuestion=function(t,r){n(this.container_),this.question_.classList.add("first-phase"),this.questionButtons_.style.display="block",this.answerFeedback_.style.display="none",e(this.question_.querySelectorAll(".browsers-remaining > *")).forEach(function(e){e.classList.remove("active"),e.classList.remove("inactive")}),this.container_.appendChild(this.question_),this.container_.appendChild(this.score_),this.container_.appendChild(this.reset_),this.questionTitle_.textContent=t,this.questionRequest_.textContent=r},u.showAnswer=function(e,t,n){var r=this;r.questionButtons_.style.display="none",r.answerFeedback_.style.display="block",t.forEach(function(e){r.question_.querySelector("."+e).classList.add("active")});var i=t.reduce(function(e,n,r){return r>0&&(e+=r==t.length-1?" & ":", "),e+=s[n]},"");r.feedbackContent_.innerHTML=r.answerContentTemplate_({wasCorrect:e,browsers:i,explanation:n})},u.score=function(e){this.scoreNum_.textContent=e},u.continueQuestion=function(){this.questionButtons_.style.display="block",this.answerFeedback_.style.display="none",e(this.question_.querySelectorAll(".browsers-remaining .active")).forEach(function(e){e.classList.remove("active"),e.classList.add("inactive")}),this.question_.classList.remove("first-phase")},u.showPhaseCode=function(e){this.questionCode_.textContent=e},u.showFinalResults=function(e,t){n(this.container_);var r="Review TODO";this.review_.innerHTML=this.finalResultsContentTemplate_({score:e,scoreSingular:1===e,maxScore:t,review:r}),this.container_.appendChild(this.finalResults_)},rq.QuizUi=i}(),function(){function e(e){this.questions=e.map(function(e){return new rq.QuestionModel(e)}),this.score=0}var t=e.prototype;Object.defineProperty(t,"maxScore",{get:function(){return this.questions.reduce(function(e,t){return e+t.phases.length},0)}}),rq.QuizModel=e}(),function(){function e(){var e=this;e.ready_=rq.getJson("quiz-data.json").then(function(t){e.model_=new rq.QuizModel(t),e.ui_=new rq.QuizUi,e.ui_.on("startQuizBtnSelected",e.nextQuestion_.bind(e)),e.ui_.on("resetSelected",e.reset_.bind(e))}),e.questionNum_=-1}var t=e.prototype;t.start=function(){var e=this;e.ready_.done(function(){e.ui_.score(e.model_.score),e.ui_.showIntro()})},t.reset_=function(){this.questionNum_=-1,this.model_.score=0,this.start()},t.nextQuestion_=function(){var e=this;e.questionNum_++;var t=e.model_.questions[e.questionNum_];if(!t)return e.results_(),void 0;var n=new rq.QuestionController(t,e.ui_);n.on("continue",e.nextQuestion_.bind(e)),n.on("phaseAnswered",function(t){t.wasCorrect&&(e.model_.score++,e.ui_.score(e.model_.score))}),n.start()},t.results_=function(){this.ui_.showFinalResults(this.model_.score,this.model_.maxScore)},rq.QuizController=e}();
//@ sourceMappingURL=all.js.map